# fzf and cd to directory in current dir
# also supports left/right arrow keys to go up/down
# one layer, and repeat in new folder
# Source: https://github.com/nguyenvukhang/dots/blob/master/zsh/.config/zsh/jump

function g() {
    # if directory has no children directory, end
    local check=$(command ls -Ap)
    [[ ! $check = *"/"* ]] && return true

    # main searching command
    local target=$(fd --hidden -t d --exclude ".git" \
        | fzf --expect "enter,esc,left,right")

    target=${target#/*}

    local res=()
    while IFS= read -r line; do
        res+=( "$line" )
    done < <( echo $target )

    local key=${res[1]}
    local location=${res[2]}

    case $key in
        'esc') return true ;;
        'left') cd ../ && g ;;
        'right') cd $location && g ;;
        'enter') cd $location ;;
        *) return true ;;
    esac
    unset key
}

function p() {
    local target=$(fd --base-directory ~/.password-store -e .gpg | fzf) # list all .gpg files
    local strip=${target[3,-1]:r}  # strip first 2 chars, and extension
    pass -c $strip
}

# enable navi
eval "$(navi widget zsh)"

# setup java
export JAVA_HOME="/usr/bin/java"
export PATH="/usr/local/opt/openjdk@11/bin:$PATH"
